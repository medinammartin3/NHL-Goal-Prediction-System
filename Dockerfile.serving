FROM python:3.12-slim

WORKDIR /code

# Copy requirements
COPY serving/requirements_serving.txt .

# Install dependencies
RUN pip install --no-cache-dir --upgrade pip setuptools wheel
RUN pip install --no-cache-dir -r requirements_serving.txt

# Copy application code
COPY serving/app.py .
COPY src ./src

EXPOSE 5000

CMD ["gunicorn", "--bind", "0.0.0.0:5000", "app:app"]